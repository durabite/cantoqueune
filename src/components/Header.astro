---
import { Button } from "@/components/ui/button";
import { Menu, FlameKindling, Guitar, Disc3, Camera } from "lucide-react";
import "@/styles/global.css";
---

<header
    class="fixed top-0 left-0 w-full z-[1000] transition-transform duration-300 ease-in-out border-b border-white/5 bg-[#050510]/75 backdrop-blur-md py-6 md:py-10 -translate-y-full shadow-lg"
    id="main-header"
>
    <div
        class="container mx-auto px-8 md:px-12 flex justify-between items-center max-w-[1200px]"
    >
        <a href="#" class="block my-8">
            <img
                src="/logo-cantoqueuneS.svg"
                alt="Canto Que Une"
                width="250"
                height="100"
                class="block h-10 md:h-12 w-auto p-8"
            />
        </a>

        <!-- Desktop Nav -->
        <nav class="hidden md:flex gap-8 items-center">
            <a
                href="#inicio"
                class="nav-link text-sm uppercase tracking-widest opacity-80 transition-all flex items-center gap-2"
                >Inicio</a
            >
            <a
                href="#fechas"
                class="nav-link text-sm uppercase tracking-widest opacity-80 transition-all flex items-center gap-2"
            >
                <Guitar className="w-4 h-4" />
                Conciertos</a
            >
            <a
                href="#paquetes"
                class="nav-link text-sm uppercase tracking-widest opacity-80 transition-all flex items-center gap-2"
            >
                <FlameKindling className="w-4 h-4" />
                Ceremonias</a
            >
            <a
                href="#productos"
                class="nav-link text-sm uppercase tracking-widest opacity-80 transition-all flex items-center gap-2"
            >
                <Disc3 className="w-4 h-4" />
                Productos</a
            >
            <a
                href="#galeria"
                class="nav-link text-sm uppercase tracking-widest opacity-80 transition-all flex items-center gap-2"
            >
                <Camera className="w-4 h-4" />
                Galería</a
            >
        </nav>

        <!-- Mobile Menu Button -->
        <Button
            variant="ghost"
            size="icon"
            className="md:hidden text-white hover:bg-white/10 hover:text-white border border-white/30"
            id="mobile-menu-toggle"
            aria-label="Toggle menu"
        >
            <Menu className="h-6 w-6" />
        </Button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div
        class="hidden absolute top-full left-0 w-full bg-[#050510]/95 p-5 flex-col gap-4 text-center border-b border-white/10 shadow-xl"
        id="mobile-menu"
    >
        <a
            href="#inicio"
            class="nav-link text-sm uppercase tracking-widest py-2">Inicio</a
        >
        <a
            href="#fechas"
            class="nav-link text-sm uppercase tracking-widest py-2">Fechas</a
        >
        <a
            href="#ceremonias"
            class="nav-link text-sm uppercase tracking-widest py-2"
            >Ceremonias</a
        >
        <a
            href="#productos"
            class="nav-link text-sm uppercase tracking-widest py-2">Productos</a
        >
        <a
            href="#galeria"
            class="nav-link text-sm uppercase tracking-widest py-2">Galería</a
        >
    </div>
</header>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const mobileBtn = document.getElementById("mobile-menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");
        const header = document.getElementById("main-header");

        // Toggle Mobile Menu
        if (mobileBtn && mobileMenu) {
            mobileBtn.addEventListener("click", () => {
                mobileMenu.classList.toggle("hidden");
                mobileMenu.classList.toggle("flex");
            });

            // Close menu when clicking a link
            const mobileLinks = mobileMenu.querySelectorAll("a");
            mobileLinks.forEach((link) => {
                link.addEventListener("click", () => {
                    mobileMenu.classList.add("hidden");
                    mobileMenu.classList.remove("flex");
                });
            });
        }

        // Navbar Scroll Effect
        if (header) {
            const handleScroll = () => {
                if (window.scrollY > 100) {
                    header.classList.remove("-translate-y-full");
                    header.classList.add("translate-y-0");
                } else {
                    header.classList.add("-translate-y-full");
                    header.classList.remove("translate-y-0");
                    mobileMenu?.classList.add("hidden"); // Also hide mobile menu if open
                    mobileMenu?.classList.remove("flex");
                }
            };

            // Run on load in case we start scrolled down
            handleScroll();
            window.addEventListener("scroll", handleScroll);
        }
    });
</script>

<style>
    .nav-link {
        color: white;
        transition: all 0.3s ease;
    }

    .nav-link:hover {
        opacity: 1;
        background: var(--gradient-main);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }

    /* Ensure icons get a color since 'color: transparent' hides them */
    .nav-link:hover :global(svg) {
        stroke: var(
            --accent-color
        ); /* Or a specific color from your gradient like #b000b0 */
        filter: drop-shadow(0 0 2px rgba(176, 0, 176, 0.5));
    }
</style>
